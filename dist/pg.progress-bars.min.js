/*! pg.progress-bars v0.1.2 | Pavel Grinchenko <psdcoder@gmail.com> | (c) 2015 */
angular.module("pg.progress-bars",[]),function(){"use strict";function t(t,e,r){var n=t.getClasses(),s={container:n.container||"progress__container",bar:n.bar||"progress__bar",barShowing:n.barShowing||"progress__container_showing"};return{restrict:"EA",replace:!0,template:'<div class="'+s.container+'"><div class="'+s.bar+'"></div></div>',scope:{name:"@",minimum:"@",speed:"@",trickleRate:"@",trickleSpeed:"@",animation:"@"},link:function(t,n){if(!t.name)throw new Error('You must specify "name" property for progress bar');n.attr("id","progress-bar-"+t.name);var i=r(t.name,{container:n,bar:n.find("div")},{minimum:+t.minimum,speed:+t.speed,animation:t.animation,trickleRate:+t.trickleRate,trickleSpeed:+t.trickleSpeed,showingClass:s.barShowing});e._register(i),t.$on("$destroy",function(){e._unregister(i)})}}}angular.module("pg.progress-bars").directive("progressBar",t),t.$inject=["ProgressBarsSettings","ProgressBarsStorage","ProgressBarFactory"]}(),function(){"use strict";function t(){return function(t,r,n){return new e(t,r,n)}}function e(t,e,r){if(!t)throw new Error("You must specify name for ProgressBar");if(!e||!e.container||!e.bar)throw new Error('You must specify elements object with "container" and "bar" dom nodes');r=r||{},this.name=t,this.elements=e,this.options={minimum:r.minimum||8,speed:r.speed||250,animation:r.animation||"ease-out",trickleRate:r.trickleRate||2,trickleSpeed:r.trickleSpeed||300,showingClass:r.showingClass},this.current=null,this.toStop=!0}angular.module("pg.progress-bars").factory("ProgressBarFactory",t),e.prototype._show=function(){this.elements.container.addClass(this.options.showingClass),this.elements.bar.css("opacity",1)},e.prototype._hide=function(){this.elements.container.removeClass(this.options.showingClass),this.elements.bar.css("opacity",0),this.elements.bar.css("width",0)},e.prototype._clamp=function(t,e,r){return e>t&&(t=e),t>r&&(t=r),t},e.prototype._trickle=function(){var t=Math.sqrt(100-this.current)/5*this.options.trickleRate;return this.inc(Math.random()*t)},e.prototype._positioning=function(t,e,r){return{width:t+"%",transition:"all "+e+"ms "+r}},e.prototype.set=function(t){var e=this;return this._show(),t=this._clamp(t,this.options.minimum,100),this.current=100===t?null:t,setTimeout(function(){var r=e._positioning(t,e.options.speed,e.options.animation);for(var n in r)r.hasOwnProperty(n)&&e.elements.bar.css(n,r[n])},0),100===t&&setTimeout(function(){e.elements.bar.css("transition","all "+e.options.speed+"ms linear"),e.elements.bar.css("opacity",0),setTimeout(function(){e._hide()},e.options.speed)},e.options.speed),this},e.prototype.get=function(){return this.current},e.prototype.start=function(){var t=this;this.toStop=!1,t.current||t.set(0);var e=function(){setTimeout(function(){t.current&&!t.toStop&&(t._trickle(),e())},t.options.trickleSpeed)};return e(),this},e.prototype.isInProgress=function(){return!this.toStop},e.prototype.stop=function(){return this.toStop=!0,this},e.prototype.inc=function(t){return this.current?("number"!=typeof t&&(t=this._clamp(Math.random()*(100-this.current)/3,10,95)),this.current=this._clamp(this.current+t,0,99.4),this.set(this.current),this):this.start()},e.prototype.done=function(){return this.current&&this.inc(30+50*Math.random()).set(100),this}}(),function(){"use strict";function t(){var t={};return{setContainerClass:function(e){return t.container=e,this},setBarClass:function(e){return t.bar=e,this},setShowingClass:function(e){return t.barShowing=e,this},$get:function(){return{getClasses:function(){return t}}}}}angular.module("pg.progress-bars").provider("ProgressBarsSettings",t)}(),function(){"use strict";function t(){var t={};this._register=function(e){t[e.name]=e},this._unregister=function(e){t[e.name]&&delete t[e.name]},this.get=function(e){return t[e]?t[e]:null}}angular.module("pg.progress-bars").service("ProgressBarsStorage",t)}();